<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>YW&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="YW&#39;s blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="YW&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="YW">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="YW's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">YW&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-cmkayjc_github_io_src/xvfb_notes" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/07/cmkayjc_github_io_src/xvfb_notes/" class="article-date">
  <time class="dt-published" datetime="2024-10-07T07:28:28.000Z" itemprop="datePublished">2024-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/10/07/cmkayjc_github_io_src/xvfb_notes/">Xvfb notes</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Brief-steps"><a href="#Brief-steps" class="headerlink" title="Brief steps"></a>Brief steps</h1><ul>
<li>Start XServer (<code>Xvfb</code>, <code>xvfb-run</code>)</li>
<li>Run X app on display:screen created by XServer (<code>xvfb-run</code>)</li>
<li>Run VNC Server for XSession(dispaly:screen), exposing port to host if vnc server runs in container (<code>x11vnc</code>)</li>
<li>Run VNC Viewer to connect to VNC Server (<code>vncviewer</code>)</li>
</ul>
<h1 id="Quick-cmds"><a href="#Quick-cmds" class="headerlink" title="Quick cmds"></a>Quick cmds</h1><ol>
<li>start Xvfb to setup Xserver with a virtual screen on frame buffer  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xvfb-run -n SERVER_NUM -f <span class="string">&quot;path/to/.Xauthority&quot;</span> -s <span class="string">&quot;-screen 0 1920x1080x24 -terminate&quot;</span> rosrun cviz light_monitor_main ... <span class="comment">#in container</span></span><br></pre></td></tr></table></figure></li>
<li>start x11vnc server in container(and exposes x11vnc server port to host) for remote access to XSession on Xvfb <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 59XX:59XX <span class="comment">#start container in host terminal, XX=SERVER_NUM</span></span><br></pre></td></tr></table></figure>
 to connect from Mac OSX, disable <code>-ncache</code> and enable <code>-passwd xxxx</code> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x11vnc -storepasswd XXXX path/to/passwd/file</span><br><span class="line">x11vnc -display :SERVER_NUM -N -auth <span class="string">&quot;path/to/.Xauthority&quot;</span> -noxrecord -noxfixes -noxdamage -forever -rfbauth path/to/passwd/file</span><br></pre></td></tr></table></figure></li>
<li>connect to x11vnc server from vnc client<ul>
<li>Linux: connect to <code>host_ip:59XX</code> with <code>vncviewer</code></li>
<li>MacOSX: connect to <code>host_ip:59XX</code> with <code>Screen Sharing App</code>.</li>
</ul>
</li>
</ol>
<h1 id="Xvfb"><a href="#Xvfb" class="headerlink" title="Xvfb"></a>Xvfb</h1><p><a target="_blank" rel="noopener" href="https://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml">Xvfb</a> − virtual framebuffer <a target="_blank" rel="noopener" href="https://www.x.org/releases/X11R7.6/doc/man/man1/Xserver.1.xhtml">X server</a> for X Version 11</p>
<p><a target="_blank" rel="noopener" href="https://manpages.ubuntu.com/manpages/trusty/man1/xvfb-run.1.html">xvfb-run</a> run specified X client or command in a virtual X server environment, e.g. run <code>firefox</code> in xvfb:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xvfb-run -n 20 -s <span class="string">&quot;-screen 0 1440x1024x24 -terminate&quot;</span> -f <span class="string">&quot;./.Xauthority&quot;</span> firefox</span><br></pre></td></tr></table></figure>
<ul>
<li>using <code>-n 20</code> instead of <code>-a</code> to use fixed server_num(display num).</li>
<li>using <code>-f &quot;Xauth FILE&quot;</code> to generate Xauthority file for x11vnc server</li>
</ul>
<h1 id="VNC-server"><a href="#VNC-server" class="headerlink" title="VNC server"></a>VNC server</h1><p><code>x11vnc</code> creats a VNC server to allow remote access to an existing X session.</p>
<ul>
<li><strong>x11vnc server in docker</strong>: forward port when start the container  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p PORT:PORT</span><br></pre></td></tr></table></figure></li>
<li><strong>For Mac OS X vnc viewer</strong>: To connect to x11vnc server with “Screen Sharing” app on OS X, you need to start x11vnc Linux server as following(see <a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/356569/how-to-connect-to-x11vnc-server-on-linux-from-os-x-macos#:~:text=If%20you%20want%20to%20connect%20to%20x11vnc%20server,use%20-ncache%20You%20have%20to%20use%20-passwd%20%5Bsource%5D">here</a>):  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x11vnc -storepasswd XXXX path/to/passwd/file</span><br><span class="line">x11vnc -display :20 -auth <span class="string">&quot;PATH_TO_Xauthority_FILE&quot;</span> -N -noxrecord -noxfixes -noxdamage -forever -rfbauth path/to/passwd/file</span><br></pre></td></tr></table></figure>
<ul>
<li>you <em>can’t</em> use <code>-ncache</code></li>
<li>you <em>have to</em> use <code>-passwd</code></li>
<li>Xauthority file is generated by <code>xvfb-run</code> script with <code>-f &quot;PATH_TO_Xauthority_FILE&quot;</code></li>
<li>display num <code>:20</code> is set to <em>server_num</em> set in <code>xvfb-run -n server_num ...</code> </li>
<li><code>-N</code> set the <code>-rfbport</code> option to <code>5900+N</code> with <code>-display :N</code></li>
</ul>
</li>
</ul>
<h1 id="VNC-client"><a href="#VNC-client" class="headerlink" title="VNC client"></a>VNC client</h1><p>e.g. vncviewer for Ubuntu, Screen Sharing App for Mac OSX. <code>path/to/passwd/file</code> is generated by x11vnc</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncviewer HOST_IP:PORT -passwd path/to/passwd/file</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/07/cmkayjc_github_io_src/xvfb_notes/" data-id="cm1z1t5z5000bzgvu6q71f2pk" data-title="Xvfb notes" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/07/cmkayjc_github_io_src/hello-world/" class="article-date">
  <time class="dt-published" datetime="2024-10-07T06:04:10.028Z" itemprop="datePublished">2024-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/10/07/cmkayjc_github_io_src/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span> [-p <span class="string">&quot;MySubfolder/filename&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/07/cmkayjc_github_io_src/hello-world/" data-id="cm1z1t5z40009zgvugm7l7laj" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/nvidia-driver-installation" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/21/cmkayjc_github_io_src/nvidia-driver-installation/" class="article-date">
  <time class="dt-published" datetime="2020-12-21T03:35:04.000Z" itemprop="datePublished">2020-12-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/21/cmkayjc_github_io_src/nvidia-driver-installation/">Install NVIDIA graphics driver</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Documentation"><a href="#Documentation" class="headerlink" title="Documentation"></a>Documentation</h2><p>See complete installation guide at <a target="_blank" rel="noopener" href="https://docs.nvidia.com/datacenter/tesla/tesla-installation-notes/index.html">Official Site</a></p>
<h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes:"></a>Notes:</h2><ol>
<li>Disable x-server &amp; opengl applications by change <code>target</code> with following cmd refere to <a target="_blank" rel="noopener" href="https://askubuntu.com/a/1243040">this answer</a></li>
</ol>
<p><strong>Switch to ‘Text’ mode:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl isolate multi-user.target</span><br></pre></td></tr></table></figure>

<p><strong>Switch to ‘Graphics’ mode:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl isolate graphics.target</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Install NVIDIA drivers with runfile</li>
</ol>
<ul>
<li><code>register the kernel module sources with DKMS? YES</code></li>
<li>sudo .&#x2F;NVIDIA-xxxx.runfile –disable-nouveau will create <code>/etc/modprobe.d/nvidia-installer-disable-nouveau.conf</code>.  Once created, take affected till deleted.</li>
<li>May need to install <code>libglvnd-dev</code> if driver is run <strong>WITHOUT</strong> <code>--no-opengl-files</code></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/21/cmkayjc_github_io_src/nvidia-driver-installation/" data-id="cm1z1t5z30006zgvu04h04eik" data-title="Install NVIDIA graphics driver" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/opengl-notes" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/21/cmkayjc_github_io_src/opengl-notes/" class="article-date">
  <time class="dt-published" datetime="2020-12-21T03:35:04.000Z" itemprop="datePublished">2020-12-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/21/cmkayjc_github_io_src/opengl-notes/">OpenGL Notes</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="OpenGL-Basics"><a href="#OpenGL-Basics" class="headerlink" title="OpenGL Basics"></a>OpenGL Basics</h1><p>Device Context(platform) -&gt; Display -&gt; Surface &amp; Context</p>
<p>Device(platform) decide display. See <a target="_blank" rel="noopener" href="https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_platform_base.txt">https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_platform_base.txt</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Multiple calls made to eglGetPlatformDisplayEXT with the same &lt;platform&gt;</span><br><span class="line">    and &lt;native_display&gt; will return the same EGLDisplay handle.</span><br></pre></td></tr></table></figure>


<p>OpenGL is a state machine. <a target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/OpenGL_Context">OpenGL Context</a> is a container of states. Bind OpenGL Objects’ states to a Context. Switch to current Context by glMakeCurrent()</p>
<p><a target="_blank" rel="noopener" href="https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglGetCurrentDisplay.xhtml">eglGetCurrentDisplay()</a> get EGLDisplay connecting to current context. </p>
<h1 id="EGL-for-create-context-for-OpenGL-on-systems-without-X-server"><a href="#EGL-for-create-context-for-OpenGL-on-systems-without-X-server" class="headerlink" title="EGL for create context for OpenGL on systems without X-server"></a>EGL for create context for OpenGL on systems without X-server</h1><p><strong>Keywords</strong>: <code>EGL</code>, <code>GLVND</code></p>
<p>Embedded Systems &#x2F; Docker &#x2F; Remote Server has no x-server running over them. OpenGL needs <a target="_blank" rel="noopener" href="https://www.khronos.org/egl">EGL(Native Platform Graphics Interface)</a> to generate context (which uses to be an x-server display).</p>
<p><a target="_blank" rel="noopener" href="https://github.com/NVIDIA/libglvnd">GLVND(the OpenGL Vendor Neutral Dispatch for Linux)</a> seperate <code>libGLX.so</code> &amp; <code>libOpenGL.so</code>, so that <code>libEGL</code> can be used to take place of <code>libGLX.so</code></p>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a><em>Reference</em>:</h4><ol>
<li><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/blog/egl-eye-opengl-visualization-without-x-server/">OpenGL Visualization without an X Server</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/blog/linking-opengl-server-side-rendering/">Pro Tip: Linking OpenGL for Server-Side Rendering</a></p>
<ul>
<li><p><em>“It does, however, require some slight modifications to your OpenGL context management code using EGL functions, as described in a previous post.”</em>    </p>
</li>
<li><p><em>“Using EGL also requires you to link your application to different libraries. This post is about how to correctly link a modern OpenGL application.”</em></p>
</li>
<li><p><em>“To use glX and OpenGL today, you should link against libOpenGL.so as well as libGLX.so. The first contains the OpenGL symbols, the latter the GLX symbols. If you want to use EGL context management instead, link against  libOpenGL.so and libEGL.so.”</em></p>
</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://virtualgl.org/About/Introduction">VirtualGL</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/opengl-driver">OpenGL Driver Support</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/hpcng/singularity/issues/1635#issuecomment-413705291">eglGetDisplay return EGL_NO_DISPLAY? Use ‘strace’ to find the problem</a></p>
</li>
</ol>
<h1 id="OpenGL-Operation-Flow"><a href="#OpenGL-Operation-Flow" class="headerlink" title="OpenGL Operation Flow"></a>OpenGL Operation Flow</h1><h2 id="CreateWindow"><a href="#CreateWindow" class="headerlink" title="CreateWindow"></a>CreateWindow</h2><h2 id="CreateOpenGLContext"><a href="#CreateOpenGLContext" class="headerlink" title="CreateOpenGLContext"></a>CreateOpenGLContext</h2><h2 id="Initialize-GLEW"><a href="#Initialize-GLEW" class="headerlink" title="Initialize GLEW"></a>Initialize GLEW</h2><p><a target="_blank" rel="noopener" href="http://glew.sourceforge.net/">GLEW</a> provides efficient run-time mechanisms for determining which OpenGL extensions are supported on the target platform. (the right glGenXXX is then available for your target platform)</p>
<ol>
<li><p>Create vertices shader &amp; fragment shader and link them by attach to a program.</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">my_program = <span class="built_in">glCreateProgram</span>()</span><br><span class="line"><span class="built_in">glAttachShader</span>(vertex_shader)</span><br><span class="line"><span class="built_in">glAttachShader</span>(fragment_shader)</span><br><span class="line"><span class="comment">//glBindFragDataLocaltion(my_program,0,&quot;outColor&quot;)</span></span><br><span class="line"><span class="built_in">glLinkProgram</span>(my_program)</span><br><span class="line"><span class="built_in">glUseProgram</span>(my_program)</span><br></pre></td></tr></table></figure></li>
<li><p>Link vertex data &amp; attributes</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    GLint posAttrib = <span class="built_in">glGetAttribLocation</span>(shaderProgram, <span class="string">&quot;position&quot;</span>);</span><br><span class="line">    <span class="built_in">glEnableVertexAttribArray</span>(posAttrib);</span><br><span class="line">    <span class="built_in">glVertexAttribPointer</span>(posAttrib, <span class="number">2</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span>*<span class="built_in">sizeof</span>(<span class="type">float</span>), <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    GLint colAttrib = <span class="built_in">glGetAttribLocation</span>(shaderProgram, <span class="string">&quot;color&quot;</span>);</span><br><span class="line">    <span class="built_in">glEnableVertexAttribArray</span>(colAttrib);</span><br><span class="line">    <span class="built_in">glVertexAttribPointer</span>(colAttrib, <span class="number">3</span>, GL_FLOAT, GL_FALSE, <span class="number">5</span>*<span class="built_in">sizeof</span>(<span class="type">float</span>), (<span class="type">void</span>*)(<span class="number">2</span>*<span class="built_in">sizeof</span>(<span class="type">float</span>)));</span><br><span class="line">    ```    </span><br><span class="line"></span><br><span class="line">* glGenVAO / glGenVBO / glGenTextures</span><br><span class="line">* glBindXXX</span><br><span class="line">    * VBO shaders should be bound after VAO is bound;</span><br><span class="line"></span><br><span class="line"># Notes:</span><br><span class="line"></span><br><span class="line">### Enable blending <span class="keyword">for</span> multiple color buffers</span><br><span class="line"></span><br><span class="line">_**Phenomenon**_: 不同的color buffer上, 前一层color_attachment0上与后一层color_attachment1重叠的部分显示为黑色, 原因是fragment shader中在`<span class="keyword">if</span> write_to_attachment1` 不满足的时候, 没有定义向attachment0写入的颜色, 则会默认向该层写入undefined值.</span><br><span class="line"></span><br><span class="line">_**Reason**_: See [<span class="keyword">this</span> answer](https:<span class="comment">//stackoverflow.com/a/39546686/11310078):</span></span><br><span class="line"></span><br><span class="line">```md</span><br><span class="line">_<span class="string">&quot;An output fragment always has values for each active color buffer, even if you didn&#x27;t write them. This is true even if you don&#x27;t declare a variable for that output value. If no value gets written to a particular fragment output location, then the value used will be undefined. But it will be something.&quot;</span>_</span><br></pre></td></tr></table></figure></li>
</ol>
<p><em><strong>Solution</strong></em>: Enable <a target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/Blending">blending</a> 通过对不满足<code>if write_to_attachment1</code>的时候向其他attachments写入全透明的值即可.</p>
<h3 id="Speed-up-pixel-data-transfer-with-PBO-Pixel-Buffer-Object"><a href="#Speed-up-pixel-data-transfer-with-PBO-Pixel-Buffer-Object" class="headerlink" title="Speed up pixel data transfer with PBO(Pixel Buffer Object)"></a>Speed up pixel data transfer with PBO(Pixel Buffer Object)</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/21/cmkayjc_github_io_src/opengl-notes/" data-id="cm1z1t5z30008zgvu4v0i556v" data-title="OpenGL Notes" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/Debug-How-To" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/04/21/cmkayjc_github_io_src/Debug-How-To/" class="article-date">
  <time class="dt-published" datetime="2020-04-21T13:36:50.000Z" itemprop="datePublished">2020-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/04/21/cmkayjc_github_io_src/Debug-How-To/">Debug How To</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Build-with-debug-info"><a href="#Build-with-debug-info" class="headerlink" title="Build with debug info"></a>Build with debug info</h2>  <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_BUILD_TYPE RelWithDebInfo)</span><br></pre></td></tr></table></figure>

<p>The above setting keep -o2 optimization with full debug infomation.<br>You can check the generated target with following cmd:</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ readelf --debug-dump=line TARGET</span><br></pre></td></tr></table></figure>

<p>No output if no debug entry included, lot of verbose info otherwise.</p>
<h2 id="Attach-a-process-with-gdb"><a href="#Attach-a-process-with-gdb" class="headerlink" title="Attach a process with gdb"></a>Attach a process with gdb</h2>  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gdb attach -p pid</span><br></pre></td></tr></table></figure>

<p>you may need to type ‘c’ (i.e. continue) to continue the process been attached</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/04/21/cmkayjc_github_io_src/Debug-How-To/" data-id="cm1z1t5z20004zgvuahnoc9fn" data-title="Debug How To" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/Math-basics" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/11/12/cmkayjc_github_io_src/Math-basics/" class="article-date">
  <time class="dt-published" datetime="2019-11-12T08:23:42.000Z" itemprop="datePublished">2019-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/12/cmkayjc_github_io_src/Math-basics/">Math Basics</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Curvature"><a href="#Curvature" class="headerlink" title="Curvature"></a>Curvature</h2><p><a target="_blank" rel="noopener" href="https://math.libretexts.org/Bookshelves/Calculus/Supplemental_Modules_(Calculus)/Vector_Calculus/2%3A_Vector-Valued_Functions_and_Motion_in_Space/2.3%3A_Curvature_and_Normal_Vectors_of_a_Curve">Curvature</a></p>
<p>curvature k &#x3D; d2r&#x2F;ds2<br>tangent vector T &#x3D; dr&#x2F;ds<br>v &#x3D; |r’(t)| &#x3D; |ds&#x2F;dt|</p>
<p>k &#x3D; |r’(t) X r”(t)|&#x2F;|r’(t)|^3 is proved <a target="_blank" rel="noopener" href="https://www.whitman.edu/mathematics/calculus_online/section13.03.html">here</a></p>
<p>B &#x3D; r’ x r”<br>N &#x3D; B x T</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/11/12/cmkayjc_github_io_src/Math-basics/" data-id="cm1z1t5z20002zgvudvxyacxo" data-title="Math Basics" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/Control-md" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/11/11/cmkayjc_github_io_src/Control-md/" class="article-date">
  <time class="dt-published" datetime="2019-11-11T03:17:42.000Z" itemprop="datePublished">2019-11-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/11/cmkayjc_github_io_src/Control-md/">Control Basic Knowledges</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Stability-variants"><a href="#Stability-variants" class="headerlink" title="Stability variants:"></a>Stability variants:</h1><ul>
<li><strong>Lyapunov stablity</strong> for any small \epsilon, \delta exists, so that when <code>x(t0) &lt; \delta</code>, for any t&gt;t0, <code>x(t) &lt; \epsilon</code>  </li>
<li><strong>Uniform stability</strong> is a concept which guarantees that the equilibrium point is not losing stability.[1]</li>
<li><strong>Asymptoptic stablity</strong>: t-&gt;0, |x(t)|-&gt;0, no quantity requirment on rate of convergence. <ul>
<li>渐进稳定: 时间趋于无穷时系统趋于平衡点.</li>
<li>局部渐进稳定: x初始时刻在平衡点附近, 则在该范围内渐进稳定</li>
</ul>
</li>
<li><strong>Exponential stability</strong>: rate of convergence, constants m, \alpha, \epsilon<br>|x(t)|&lt;me^(-\alpha(t - t_0))|x(t)| holds for all |x(t0)|&lt; \epsilon and t &gt; t_0;</li>
</ul>
<h1 id="Lyapunov-Theory"><a href="#Lyapunov-Theory" class="headerlink" title="Lyapunov Theory"></a>Lyapunov Theory</h1><p>系统的Lyapunov函数(广义的能量函数)满足一定性质,则无需推导时变系统的微分方程,即可得出system trajectory的稳定性.</p>
<p><a target="_blank" rel="noopener" href="https://stanford.edu/class/ee363/lectures/lyap.pdf">PPT</a></p>
<p>x_e is the unique <strong>equilibrium</strong> point:</p>
<ul>
<li><strong>Global</strong> asymptotic statble: t-&gt;inf, x(t)-&gt;x_e, </li>
<li><strong>Local</strong> asymptotic statble: for <code>|x(0)-x_e|&lt; R</code> ,t-&gt;inf, x(t)-&gt;x_e</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://web.tuat.ac.jp/~gvlab/ronbun/ReadingGroupControl/mls-lyap.pdf">1.Lyapunov Statibility theory</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/11/11/cmkayjc_github_io_src/Control-md/" data-id="cm1z1t5z5000czgvuhd3763g9" data-title="Control Basic Knowledges" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/pnc-survey" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/10/17/cmkayjc_github_io_src/pnc-survey/" class="article-date">
  <time class="dt-published" datetime="2019-10-17T05:36:00.000Z" itemprop="datePublished">2019-10-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/10/17/cmkayjc_github_io_src/pnc-survey/">[PaperReading] A Survey of Motion Plannig and Control Techniques for Self-Driving Urban Vehicles</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Stability"><a href="#Stability" class="headerlink" title="Stability"></a>Stability</h4><ul>
<li>Uniform asymptotic stability: for time varying systems, stable error is <strong>indpendent</strong> with time.</li>
<li>Exponential stability: rate of convergence is bounded by ay an exponential decay.</li>
</ul>
<h3 id="Controllers"><a href="#Controllers" class="headerlink" title="Controllers"></a>Controllers</h3><ol>
<li><strong>Pure pursuit</strong> is for <strong>straight line</strong>. Not for parking task.</li>
<li><strong>Rear wheel based feed back</strong> is capible with both FORWARD&#x2F;BACKWARD moving</li>
<li><strong>Front wheel based feed back</strong> is easy to compute but hard for BACKWARD moving in parking</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/10/17/cmkayjc_github_io_src/pnc-survey/" data-id="cm1z1t5z5000azgvufxlzedzt" data-title="[PaperReading] A Survey of Motion Plannig and Control Techniques for Self-Driving Urban Vehicles" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/paper-reading" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/10/17/cmkayjc_github_io_src/paper-reading/" class="article-date">
  <time class="dt-published" datetime="2019-10-17T05:30:58.000Z" itemprop="datePublished">2019-10-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/10/17/cmkayjc_github_io_src/paper-reading/">paper reading</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h1><ol>
<li><a target="_blank" rel="noopener" href="https://cmkayjc.github.io/2019/10/17/pnc-survey/">A Survey of Motion Planning and Control Techniques for Self-driving Urban Vehicles</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/10/17/cmkayjc_github_io_src/paper-reading/" data-id="cm1z1t5z30007zgvu7tb750o4" data-title="paper reading" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cmkayjc_github_io_src/Code-Structure-Tips" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/09/27/cmkayjc_github_io_src/Code-Structure-Tips/" class="article-date">
  <time class="dt-published" datetime="2019-09-27T02:50:50.000Z" itemprop="datePublished">2019-09-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/09/27/cmkayjc_github_io_src/Code-Structure-Tips/">Code Structure Tips</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Inner-data-types-vs-message"><a href="#Inner-data-types-vs-message" class="headerlink" title="Inner data types vs. message"></a>Inner data types vs. message</h1><h3 id="Inner-data-types"><a href="#Inner-data-types" class="headerlink" title="Inner data types"></a>Inner data types</h3><p>Define your own data types for internal use so that the module do not rely on two many external dependencies. They group relative data together as a single object.</p>
<ol>
<li>Data types used in a class. –&gt; Class scope.</li>
<li>Data types used as interfaces between class. –&gt; Package namespace scope.</li>
</ol>
<h3 id="Structure-data-serialization"><a href="#Structure-data-serialization" class="headerlink" title="Structure data serialization"></a>Structure data serialization</h3><p><code>Protocol buffers</code> are a language-neutral, platform-neutral extensible mechanism <em>for serializing structured data</em>, which can be used as <em>data interfaces</em> (message) to exchange data with others, so as ROS message.</p>
<h1 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h1><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ol>
<li><p>限制在20~30行内</p>
</li>
<li><p>单一抽象等级: 仅进行输入参数等级的操作, 例如:</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(Data data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">process</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(Data data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// inner_process should not be in func, it&#x27;s another abastract level (data.field)</span></span><br><span class="line">  <span class="built_in">inner_process</span>(data.field);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>不要多于三输入参数, 尽量不要包含输出参数</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/09/27/cmkayjc_github_io_src/Code-Structure-Tips/" data-id="cm1z1t5yx0000zgvu66bh1cpz" data-title="Code Structure Tips" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/10/07/cmkayjc_github_io_src/xvfb_notes/">Xvfb notes</a>
          </li>
        
          <li>
            <a href="/2024/10/07/cmkayjc_github_io_src/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/12/21/cmkayjc_github_io_src/nvidia-driver-installation/">Install NVIDIA graphics driver</a>
          </li>
        
          <li>
            <a href="/2020/12/21/cmkayjc_github_io_src/opengl-notes/">OpenGL Notes</a>
          </li>
        
          <li>
            <a href="/2020/04/21/cmkayjc_github_io_src/Debug-How-To/">Debug How To</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 YW<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>